<?xml version="1.0" encoding="UTF-8" ?>
<!--
 * log4j2.xml
 * 
 * This is a configuration file Log4j2. (Eclipse local development)
 * 
 * Log DEBUG, INFO-level application of log (logs / ai_App.log), 
 * more than WARN log level is output to the (logs / ai_Sys.log) system log.
 * 
 * In addition, a log of all levels are output as standard output.
 * 
 * The settings made in the size of rotation in order to limit the size of the log file.
 * If you want to output a fixed Appender Please change the settings of the individual.
 * 
 * If you are deploying production environment / semi-production environment, 
 * please replace the configuration file for each environment.
 * (replaced automatically if using the build.xml)
 *  
 *  $ log4j2.xml 1784 2015-07-06 07:31:41Z 10088DS00879 $
 *
 *  Copyright (c) 2015 DENSO IT SOLUTIONS. All rights reserved.
-->

<Configuration>
    
    <!-- Appender ========================================================== -->
    <Appenders>
        <!-- Application Log (fixed output file: not used) -->
        <!--File name="app_file_fix" fileName="logs/ai_App.log" append="true">
            <PatternLayout pattern="[APP] [%d{yyyy-MM-dd HH:mm:ss.SSS}] DSC-ID[%X{DSC_ID}] SID[%X{SID}] RID[%X{RID}] [%-5p] %m%n" />
            
            <Filters>
                <ThresholdFilter level="TRACE" />
                <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL" />
            </Filters>
        </File-->
        
        <!-- System Log (fixed output file: not used) -->
        <!--File name="sys_file_fix" fileName="logs/ai_Sys.log" append="true">
            <PatternLayout pattern="[SYS] [%d{yyyy-MM-dd HH:mm:ss.SSS}] DSC-ID[%X{DSC_ID}] SID[%X{SID}] RID[%X{RID}] [%-5p] %m%n" />
            
            <Filters>
                <ThresholdFilter level="WARN" />
                <ThresholdFilter level="OFF" onMatch="DENY" onMismatch="NEUTRAL" />
            </Filters>
        </File-->
        
        <!-- Application Log (size rotation) -->
        <RollingFile name="app_file_roll" fileName="logs/ai_App.log" filePattern="logs/ai_App.log.%i"  append="true">
            <PatternLayout pattern="[APP] [%d{yyyy-MM-dd HH:mm:ss.SSS}] DSC-ID[%X{DSC_ID}] SID[%X{SID}] RID[%X{RID}] [%-5p] %m%n" />
            <Policies>
                <SizeBasedTriggeringPolicy size="5MB" />
            </Policies>
            <DefaultRolloverStrategy max="10" />
            
            <Filters>
                <ThresholdFilter level="TRACE" />
                <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL" />
            </Filters>
        </RollingFile>
        
        <!-- System Log (size rotation) -->
        <RollingFile name="sys_file_roll" fileName="logs/ai_Sys.log" filePattern="logs/ai_Sys.log.%i"  append="true">
            <PatternLayout pattern="[SYS] [%d{yyyy-MM-dd HH:mm:ss.SSS}] DSC-ID[%X{DSC_ID}] SID[%X{SID}] RID[%X{RID}] [%-5p] %m%n" />
            <Policies>
                <SizeBasedTriggeringPolicy size="5MB" />
            </Policies>
            <DefaultRolloverStrategy max="10" />
            
            <Filters>
                <ThresholdFilter level="WARN" />
                <ThresholdFilter level="OFF" onMatch="DENY" onMismatch="NEUTRAL" />
            </Filters>
        </RollingFile>
        
        <!-- Application Log (standard output) -->
        <Console name="app_stdout" target="SYSTEM_OUT">
            <PatternLayout pattern="[APP] [%d{yyyy-MM-dd HH:mm:ss.SSS}] DSC-ID[%X{DSC_ID}] SID[%X{SID}] RID[%X{RID}] [%-5p] %m%n" />
            
            <Filters>
                <ThresholdFilter level="TRACE" />
                <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL" />
            </Filters>
        </Console>
        
        <!-- System Log (standard output) -->
        <Console name="sys_stdout" target="SYSTEM_OUT">
            <PatternLayout pattern="[SYS] [%d{yyyy-MM-dd HH:mm:ss.SSS}] DSC-ID[%X{DSC_ID}] SID[%X{SID}] RID[%X{RID}] [%-5p] %m%n" />
            
            <Filters>
                <ThresholdFilter level="WARN" />
                <ThresholdFilter level="OFF" onMatch="DENY" onMismatch="NEUTRAL" />
            </Filters>
        </Console>
    </Appenders>
    
    <!-- Logger ============================================================ -->
    <Loggers>
        <!-- Application Development Infrastructure -->
        <Logger name="com.globaldenso.ai" level="INFO" additivity="false" >
            <AppenderRef ref="app_file_roll" />
            <AppenderRef ref="sys_file_roll" />
            <AppenderRef ref="app_stdout" />
            <AppenderRef ref="sys_stdout" />
        </Logger>
        
        <!-- Spring Framework transaction information output -->
        <Logger name="org.springframework.transaction.support.TransactionSynchronizationManager" level="TRACE" additivity="false" >
            <AppenderRef ref="app_file_roll" />
            <AppenderRef ref="sys_file_roll" />
            <AppenderRef ref="app_stdout" />
            <AppenderRef ref="sys_stdout" />
        </Logger>
        <Logger name="org.springframework.transaction" level="DEBUG" additivity="false" >
            <AppenderRef ref="app_file_roll" />
            <AppenderRef ref="sys_file_roll" />
            <AppenderRef ref="app_stdout" />
            <AppenderRef ref="sys_stdout" />
        </Logger>
        
        <!-- information output MyBATIS SQL  -->
        <Logger name="com.globaldenso" level="DEBUG" additivity="false" >
            <AppenderRef ref="app_file_roll" />
            <AppenderRef ref="sys_file_roll" />
            <AppenderRef ref="app_stdout" />
            <AppenderRef ref="sys_stdout" />
            
            <MarkerFilter marker="MYBATIS" />
        </Logger>
        
        <!-- Root ============================================================== -->
        <Root level="ERROR" >
            <AppenderRef ref="sys_file_roll" />
            <AppenderRef ref="sys_stdout" />
        </Root>
    </Loggers>
    
</Configuration>
