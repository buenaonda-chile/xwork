<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.globaldenso.dnkr.integration.dao.ApplnMailSettingDao">

<!-- 検索結果をMapで受け取る -->
    <resultMap id="ApplnMailSettingInput" type="ApplnMailSettingDomain">
        <result property="clsCode" column="CLS_CODE" />		<!-- 사업부코드 -->
        <result property="locCode" column="LOC_CODE" />		<!-- 부서코드 -->
        <result property="locNm" column="LOC_NM" />
        <result property="lineCode" column="LINE_CODE" />	<!-- 라인코드 -->
        <result property="lineNm" column="LINE_NM" /> 		<!-- 라인명 -->
        
        <result property="aprvlBy1" column="APRVL_BY1" />	<!-- 이름1 -->
        <result property="mailAdr1" column="MAIL_ADR1" />	<!-- 메일1 -->
        <result property="aprvlBy2" column="APRVL_BY2" />	<!-- 이름2 -->
        <result property="mailAdr2" column="MAIL_ADR2" />	<!-- 메일2 -->
        <result property="aprvlBy3" column="APRVL_BY3" />	<!-- 이름3 -->
        <result property="mailAdr3" column="MAIL_ADR3" />	<!-- 메일3 -->
        <result property="aprvlBy4" column="APRVL_BY4" />	<!-- 이름4 -->
        <result property="mailAdr4" column="MAIL_ADR4" />	<!-- 메일4 -->
        <result property="aprvlBy5" column="APRVL_BY5" />	<!-- 이름5 -->
        <result property="mailAdr5" column="MAIL_ADR5" />	<!-- 메일5 -->        
        
        <result property="regUser" column="REG_USER" />		<!-- 등록자 -->
        <result property="regDate" column="REG_DATE" />		<!-- 등록일 -->
        <result property="modUser" column="MOD_USER" />		<!-- 수정자 -->
        <result property="modDate" column="MOD_DATE" />		<!-- 수정일 -->
             
    </resultMap>

	<select id="searchLineList" resultMap="ApplnMailSettingInput" parameterType="ApplnMailSettingDomain">
		SELECT 
		    CLS_CODE
		    , LINE_CODE
		    , LINE_NM
		    , LOC_CODE
		FROM PSZDBLIB.FHP010PF
		WHERE 1=1
		<if test='clsCode != null and !clsCode.equalsIgnoreCase("")'>
		  AND CLS_CODE = #{clsCode}
		</if>
		<if test='locCode != null and !locCode.equalsIgnoreCase("")'>
		  AND LOC_CODE = #{locCode}
		</if>
	</select>

	<select id="searchLineValues" resultMap="ApplnMailSettingInput" parameterType="ApplnMailSettingDomain">
		SELECT 
		    OPERT_DE
		    , CLS_CODE
		    , LOC_CODE
		    , LINE_CODE
		    , SE
		    , CODE
		    , HR_MNT
		FROM PSZDBLIB.FHP130PF
		WHERE 1=1
		  AND OPERT_DE  = #{opertDe}
		<if test='clsCode != null and !clsCode.equalsIgnoreCase("")'>
		  AND CLS_CODE  = #{clsCode}
		</if>
		<if test='locCode != null and !locCode.equalsIgnoreCase("")'>
		  AND LOC_CODE  = #{locCode}
		</if>
	</select>

    <!-- 検索 SQL文（任意条件） -->
    <select id="searchByCondition" resultMap="ApplnMailSettingInput" parameterType="ApplnMailSettingDomain">
		
		select *
		from PSZDBLIB.FHP160PF
		where cls_code = #{clsCode}
		
    </select>
    
    <!-- 検索 SQL文（任意条件 件数取得） -->
  	<select id="searchCount" resultType="java.lang.Integer" parameterType="ApplnMailSettingDomain">
       
        SELECT 
              COUNT(*) AS CNT 
        from PSZDBLIB.FHP160PF
		where cls_code = #{clsCode}
			and loc_code = #{locCode}
		
    </select>
    
   <!--  登録 SQL文 -->
    <insert id="create" parameterType ="ApplnMailSettingDomain">
    	INSERT INTO PSZDBLIB.FHP160PF (
    							CLS_CODE,
    							LOC_CODE,
    							<if test='aprvlBy1 != null and !clsCode.equalsIgnoreCase("")'>
                               	APRVL_BY1,
                               	</if>
                               	MAIL_ADR1,
                               	<if test='aprvlBy2 != null and !clsCode.equalsIgnoreCase("")'>
                               	APRVL_BY2,
                               	</if>
                               	<if test='mailAdr2 != null and !clsCode.equalsIgnoreCase("")'>
                               	MAIL_ADR2,
                               	</if>
                               	<if test='aprvlBy3 != null and !clsCode.equalsIgnoreCase("")'>
                               	APRVL_BY3,
                               	</if>
                               	<if test='mailAdr3 != null and !clsCode.equalsIgnoreCase("")'>
                               	MAIL_ADR3,
                               	</if>
                               	<if test='aprvlBy4 != null and !clsCode.equalsIgnoreCase("")'>
                               	APRVL_BY4,
                               	</if>
                               	<if test='mailAdr4 != null and !clsCode.equalsIgnoreCase("")'>
                               	MAIL_ADR4,
                               	</if>
                               	<if test='aprvlBy5 != null and !clsCode.equalsIgnoreCase("")'>
                               	APRVL_BY5,
                               	</if>
                               	<if test='mailAdr5 != null and !clsCode.equalsIgnoreCase("")'>
                               	MAIL_ADR5,
                               	</if>
                               	REG_USER,
                               	REG_DATE
                               )
	    VALUES (
	    		#{clsCode},
	    		#{locCode},
	    		<if test='aprvlBy1 != null and !clsCode.equalsIgnoreCase("")'>
	            #{aprvlBy1},
	            </if>
	            #{mailAdr1},
	            <if test='aprvlBy2 != null and !clsCode.equalsIgnoreCase("")'>
	            #{aprvlBy2},
	            </if>
	            <if test='mailAdr2 != null and !clsCode.equalsIgnoreCase("")'>
	            #{mailAdr2},
	            </if>
	            <if test='aprvlBy3 != null and !clsCode.equalsIgnoreCase("")'>
	            #{aprvlBy3},
	            </if>
	            <if test='mailAdr3 != null and !clsCode.equalsIgnoreCase("")'>
	            #{mailAdr3},
	            </if>
	            <if test='aprvlBy4 != null and !clsCode.equalsIgnoreCase("")'>
	            #{aprvlBy4},
	            </if>
	            <if test='mailAdr4 != null and !clsCode.equalsIgnoreCase("")'>
	            #{mailAdr4},
	            </if>
	            <if test='aprvlBy5 != null and !clsCode.equalsIgnoreCase("")'>
	            #{aprvlBy5},
	            </if>
	            <if test='mailAdr5 != null and !clsCode.equalsIgnoreCase("")'>
	            #{mailAdr5},
	            </if>
	            #{regUser},REPLACE(CHAR(DATE(CURRENT DATE), ISO), '-','')
	            )
    </insert>

	<!-- 更新 SQL文（主キー） -->
    <update id="update" parameterType="ApplnMailSettingDomain">
        update PSZDBLIB.FHP160PF
		set
		    LOC_CODE = #{locCode},
		    <if test='aprvlBy1 != null and !clsCode.equalsIgnoreCase("")'>
		    APRVL_BY1 = #{aprvlBy1},
		    </if>
		    <if test='mailAdr1 != null and !clsCode.equalsIgnoreCase("")'>
		    MAIL_ADR1 = #{mailAdr1},
		    </if>
		    <if test='aprvlBy2 != null and !clsCode.equalsIgnoreCase("")'>
		    APRVL_BY2 = #{aprvlBy2},
		    </if>
		    <if test='mailAdr2 != null and !clsCode.equalsIgnoreCase("")'>
		    MAIL_ADR2 = #{mailAdr2},
		    </if>
		    <if test='aprvlBy3 != null and !clsCode.equalsIgnoreCase("")'>
		    APRVL_BY3 = #{aprvlBy3},
		    </if>
		    <if test='mailAdr3 != null and !clsCode.equalsIgnoreCase("")'>
		    MAIL_ADR3 = #{mailAdr3},
		    </if>
		    <if test='aprvlBy4 != null and !clsCode.equalsIgnoreCase("")'>
		    APRVL_BY4 = #{aprvlBy4},
		    </if>
		    <if test='mailAdr4 != null and !clsCode.equalsIgnoreCase("")'>
		    MAIL_ADR4 = #{mailAdr4},
		    </if>
		    <if test='aprvlBy5 != null and !clsCode.equalsIgnoreCase("")'>
		    APRVL_BY5 = #{aprvlBy5},
		    </if>
		    <if test='mailAdr5 != null and !clsCode.equalsIgnoreCase("")'>
		    MAIL_ADR5 = #{mailAdr5},
		    </if>
		    MOD_USER = #{modUser},
		    MOD_DATE = REPLACE(CHAR(DATE(CURRENT DATE), ISO), '-','')
		where 1=1
		    AND CLS_CODE = #{clsCode}
			AND LOC_CODE = #{locCode}
    </update>

   <!--  削除 SQL文（主キー） -->
    <delete id="delete" parameterType="ApplnMailSettingDomain">
        DELETE 
        FROM 
             PSZDBLIB.FHP160PF
        WHERE 1=1
        AND   CLS_CODE  = #{clsCode}
        AND   LOC_CODE  = #{locCode}
    </delete>

</mapper>